<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <link rel='stylesheet' href="calculator.css" />
    <title>
        Calculator
    </title>
</head>

<body>
    <script src="/calculator.js"></script>
    <h1>Calculator</h1>
    <center>
        <div>
            <input id="left" type="text" readonly placeholder="numbers">
            <input id="center" type="text" readonly placeholder="operators">
            <input id="right" type="text" readonly placeholder="numbers">
        </div>
    </center>
    <div class="main">
        <div>
            <button data-value="clear" class="bumper circle" class='operator'> CLEAR
            </button>
        </div>
        <div>
            <button data-value="7" class="bumper circle">
                7
            </button>
            <button data-value="8" class="bumper circle">
                8
            </button>
            <button data-value="9" class="bumper circle">
                9
            </button>
            <button data-value="divide" class="bumper circle" class='operator'>
                รท
            </button>
        </div>
        <div>
            <button data-value="4" class="bumper circle">
                4
            </button>
            <button data-value="5" class="bumper circle">
                5
            </button>
            <button data-value="6" class="bumper circle">
                6
            </button>
            <button data-value="multiply" class="bumper circle" class='operator'>
                ร
            </button>
        </div>
        <div>
            <button data-value="1" class="bumper circle">
                1
            </button>
            <button data-value="2" class="bumper circle">
                2
            </button>
            <button data-value="3" class="bumper circle">
                3
            </button>
            <button data-value="subtract" class="bumper circle" class='operator'>
                -
            </button>
        </div>
        <div>
            <button data-value="0" class="bumper circle">
                0
            </button>
            <button data-value="decimal" class="bumper circle">
                .
            </button>
            <button data-value="equals" class="bumper circle" class='operator'>
                =
            </button>
            <button data-value="add" class="bumper circle" class='operator'>
                +
            </button>
        </div>
    </div>
    <script>
    (function() {
        "use strict";
        // variables
        var result = 0;
        var operator = null;
        var completed = false;
        var isDecimal = false;
        // elements
        var leftInput = document.getElementById("left");
        var centerInput = document.getElementById("center");
        var rightInput = document.getElementById("right");
        var activeInput = leftInput;
        var buttons = document.getElementsByTagName("button");
        // display values
        function toDisplay(event) {
            switch (this.getAttribute("data-value")) {
                case "clear":
                    leftInput.value = null;
                    centerInput.value = null;
                    rightInput.value = null;
                    operator = null;
                    completed = true;
                    isDecimal = false;
                    activeInput = leftInput;
                    break;
                case "divide":
                    centerInput.value = "/";
                    operator = "divide";
                    completed = false;
                    isDecimal = false;
                    activeInput = rightInput;
                    break;
                case "multiply":
                    centerInput.value = "X";
                    operator = "multiply";
                    completed = false;
                    isDecimal = false;
                    activeInput = rightInput;
                    break;
                case "subtract":
                    centerInput.value = "-";
                    operator = "subtract";
                    completed = false;
                    isDecimal = false;
                    activeInput = rightInput;
                    break;
                case "add":
                    centerInput.value = "+";
                    operator = "add";
                    completed = false;
                    isDecimal = false;
                    activeInput = rightInput;
                    break;
                case "equals":
                    leftInput.value = doMath(parseFloat(leftInput.value), operator, parseFloat(rightInput.value));
                    rightInput.value = null;
                    completed = true;
                    isDecimal = false;
                    activeInput = leftInput;
                    break;
                case "decimal":
                    if (!isDecimal) {
                        if (completed) {
                            activeInput.value = this.innerText;
                            centerInput.value = null;
                            operator = null;
                            isDecimal = true;
                            completed = false;
                        } else {
                            activeInput.value += this.innerText;
                            isDecimal = true;
                        }
                    }
                    break;
                default:
                    if ((activeInput == leftInput) && (completed)) {
                        activeInput.value = this.innerText;
                        centerInput.value = null;
                        operator = null;
                        completed = false;
                    } else {
                        activeInput.value += this.innerText;
                    }
            }
        }

        function doMath(left, operator, right) {
            switch (operator) {
                case "add":
                    if (isNaN(right)) {
                        right = left;
                    }
                    result = left + right;
                    return result;
                case "subtract":
                    if (isNaN(right)) {
                        right = left;
                    }
                    result = left - right;
                    return result;
                case "multiply":
                    if (isNaN(right)) {
                        right = left;
                    }
                    result = left * right;
                    return result;
                case "divide":
                    if (isNaN(right)) {
                        right = left;
                    }
                    result = left / right;
                    return result;
                default:
                    result = 0;
                    return result;
            }
        }
        //Listener
        for (var i = 0; i < buttons.length; i++) {
            buttons[i].addEventListener('click', toDisplay);
        }
    })();
    </script>
</body>

</html>
